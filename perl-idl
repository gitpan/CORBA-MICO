#!/usr/bin/perl -w

# Ignore the user's config files

BEGIN {
  unshift @ARGV, "-ORBConfFile", "/usr/no-such-file";
}

use CORBA::MICO;

my $orb = CORBA::ORB_init("mico-local-orb");
my $ir = $orb->resolve_initial_references("InterfaceRepository");

my $ir_ior = $orb->object_to_string ($ir);
print "$ir_ior\n";

if (!($pid = fork())) {
    system("idl",
	   "--feed-ir",
	   "-ORBIfaceRepoIOR", $ir_ior,
	   "/usr/local/include/mico/ir.idl") ||
	       die "Cannot load interface repository interface!";
} else {
    
}
